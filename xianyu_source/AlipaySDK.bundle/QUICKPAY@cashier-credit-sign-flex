{"data":{"children":[{"children":[{"src":"AlipaySDK.bundle/amc.i18n","tag":"meta","type":"i18n"},{"tag":"meta","type":"i18n","locale":{"zh_HK":{"click_agree":"點擊按鈕即同意","agree_auth_fp":"同意協議並驗證指紋或"},"zh_TW":{"click_agree":"點擊按鈕即同意","agree_auth_fp":"同意協議並驗證指紋或"},"en_US":{"click_agree":"I confirm","agree_auth_fp":"Use fingerprint or"},"zh_CN":{"click_agree":"点击按钮即同意","agree_auth_fp":"同意协议并验证指纹或"}}},{"rel":"stylesheet","tag":"link","href":"AlipaySDK.bundle/amc.css"},{"src":"AlipaySDK.bundle/amc.js","tag":"script"},{"children":[{"tag":"text","text":"amc.fn.spmPageCreate(\"a283.b5789\");var rpc=amc.rpcData;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var pcreditPayPng=amc.path+\"alipay_msp_pcredit\";var creditAmount=rpc.creditAmount||\"0\";var dueDay=rpc.dueDay||\"\";var confirmPayText=rpc.confirmPay||\"{{open_pcredit_and_pay}}\";var paySuccess=false;var PAYMENT_CODE_SUCCESS=\"0001\";var PAYMENT_CODE_FAIL=\"0002\";var canGoBack=true;var VI_ACTION_START=\"viStart\";var VI_ACTION_PRE_LOAD=\"viPreload\";var VI_ACTION_START_HUAWEI=\"viPreStart\";var VI_ACTION_RPC_RESPONSE=\"viRpcResponse\";var VI_ACTION_PAY_STATUS=\"payStatus\";var VI_ACTION_CLOSE_PAGE=\"viClosePage\";var VI_CHANNEL_MODE_FROM_TEMPLATE=\"1\";var pwdType=null;var viPwdTip=null;var logAction=amc.fn.logAction;var VI_LOG_ACTION_TYPE=\"VI\";var confirmAction=buildConfirmActionWithAct(rpc.confirmAct);var rpcVIData=rpc.VIData;var verifyWithVI=!!rpcVIData;var VIDataForPwdPage=rpcVIData;var isResume=false;var spmExposure=amc.fn.spmExposure;var spmClicked=amc.fn.spmClick;function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function buildConfirmActionWithAct(b){var a={name:\"/cashier/pay\"};if(b&&b.name){a=b}a.loadtxt=\"\";a.viChannelMode=VI_CHANNEL_MODE_FROM_TEMPLATE;return a}function initUI(){var c=amc.fn.iNav(amc.res.arrowLeft,rpc.pageTitle||\"{{open_pcredit_service}}\",null,null,onBack,null);getTag(\"btnText\").innerText=confirmPayText;getTag(\"body\").insertBefore(c,getTag(\"titleLine\"));spmExposure(\"a283.b5789.c12705.d23268\");getTag(\"pcreditPayLogo\").src=pcreditPayPng;getTag(\"creditAmount\").innerText=rpc.creditMsg||amc.fn.i18nPlaceholderReplace(\"{{credit_quota_full}}\",'<font size=\"22\">'+creditAmount+\"</font>\");if(rpc.dueMsg){getTag(\"dueDay\").innerText=rpc.dueMsg;getTag(\"dueMsgBox\").className=\"due-msg-box\"}else{getTag(\"dueDay\").innerText=amc.fn.i18nPlaceholderReplace(\"{{pcredit_text_full}}\",dueDay)}var b=amc.fn.i18nValueForKey(\"{{click_agree}}\")||\"\";var a=rpc.protocolsTitle||amc.fn.i18nValueForKey(\"{{open_pcredit_protocol}}\")||\"\";getTag(\"protocolInfo\").innerText=b;getTag(\"protocolName\").innerText=a;spmExposure(\"a283.b5789.c12705.d23269\");getTag(\"btnText\").style.maxWidth=window.innerWidth-70;spmExposure(\"a283.b5789.c12705.d23267\");if(b.length>12||a.length>60){getTag(\"protocolBox\").className=\"protocol-box-vert\"}preLoadVIPlugin(rpcVIData);if(verifyWithVI){}else{logAction(\"non-VI\",VI_LOG_ACTION_TYPE)}}document.viewDidAppear=function(){if(isResume){amc.fn.spmExposureResume()}else{isResume=true}};function onPaySuccess(){paySuccess=true;amc.fn.playGif(getTag(\"gifImg\"),amc.res.success);getTag(\"btnText\").innerText=\"{{pay_ok}}\"}function onPayFailure(){paySuccess=false;stopLoading()}function startLoadignWithText(a){amc.fn.playGif(getTag(\"gifImg\"),amc.res.loading);if(a){getTag(\"btnText\").innerText=a}}function stopLoading(){amc.fn.playGif(getTag(\"gifImg\"),\"\");getTag(\"btnText\").innerText=confirmPayText}function pwdFreePay(){var a={action:confirmAction};a.action[\"neec\"]=\"6004\";startLoadignWithText();document.asyncSubmit(a,function(b){if(paySuccess){return}if(b.status==PAYMENT_CODE_SUCCESS){onPaySuccess()}else{if(b.status==\"0000\"){onPayFailure()}else{if(b.status==PAYMENT_CODE_FAIL){onPayFailure()}else{if(b.status==\"0006\"){onPayFailure()}}}}})}function onPay(){spmClicked(\"a283.b5789.c12705.d23267\");if(paySuccess){return}if(verifyWithVI){startVIPlugin(rpcVIData,\"viStandardCallback\",false);logAction(\"viLen|\"+(rpcVIData||\"\").length,VI_LOG_ACTION_TYPE)}else{pwdFreePay()}}function openProtocol(){spmClicked(\"a283.b5789.c12705.d23269\");if(rpc.protocols){amc.fn.showProtocolList(rpc.protocols)}else{amc.fn.openweb(\"https://fun.alipay.com/bank/index.htm?page=HBFWXY\")}}function onBack(){spmClicked(\"a283.b5789.c12705.d23268\");amc.fn.spmPageDestroy(\"a283.b5789\");if(rpc.backAct==\"back\"){document.submit({action:{name:\"loc:back\"}})}else{document.submit({action:{name:\"/cashier/view\"}})}}function onKeyDown(){if(event.which==4){onBack()}}function mergeObjcts(){var a={};if(arguments&&arguments.length){for(var c=0;c<arguments.length;c++){var d=arguments[c];if(!amc.fn.isObject(d)){continue}for(var b in d){a[b]=d[b]}}}return a}function sendDataToVIPlugin(a){getTag(\"viPlugin\").src=JSON.stringify(a);logAction((a&&a.action)||\"action\",VI_LOG_ACTION_TYPE)}function preLoadVIPlugin(a){var b={action:VI_ACTION_PRE_LOAD,data:a};sendDataToVIPlugin(b)}function startVIPlugin(b,d,a){var c={action:a?VI_ACTION_START_HUAWEI:VI_ACTION_START,data:b,callbacks:{onViAction:d},config:a?{hwPaySuccessText:\"{{pay_success}}\",hwAuthingText:\"{{auth_fingering}}\",hwPayingText:\"{{paying}}\",hwRetryText:\"{{retry_finger}}\",hwAuthTip:\"{{agree_auth_fp}}\",hwInputPwdTip:\"{{input_pwd_s}}\"}:{fpAlertMsg:\"{{confirm_exit}}\",fpAlertCancelBtn:\"{{confirm_btn}}\",fpAlertToPwdBtn:\"{{input_pwd_s}}\",shouldDismissAfterAuth:\"Y\"}};sendDataToVIPlugin(c)}function sendResponseDataToVI(a){var b={action:VI_ACTION_RPC_RESPONSE,data:a};sendDataToVIPlugin(b)}function processCallback(c,a){var g={};try{g=JSON.parse(c)}catch(f){amc.fn.logError(\"VI\",\"解析核身JSON失败\"+f);return}var b=g.action;var d=g.data;if(b!=\"viStatus\"){logAction(b||\"actType\",VI_LOG_ACTION_TYPE)}amc.fn.isString(b)&&a[b]&&a[b](d)}function viHuaweiFingerPayCallback(b){var a={viStatus:processVIStatusHuaweiFinger,viRpcRequest:processVIRpcRequestHuaweiFinger,viToPWD:processVIToPWD};processCallback(b,a)}function viStandardCallback(b){var a={viStatus:processVIStatus,viRpcRequest:processVIRpcRequest,viToPWD:processVIToPWD};processCallback(b,a)}function processVIStatus(c){if(!c){return}var a=c.status;var b=c.type;logAction((b||\"type\")+\"-\"+(a||\"status\"),VI_LOG_ACTION_TYPE);if(a===\"start\"){pwdType=b;canGoBack=(b!=\"wl\");if(pwdType==\"pwd\"||pwdType==\"spwd\"){processVIToPWD(rpcVIData)}else{toggleBioProcessLoading(true)}}else{if(a===\"end\"){toggleBioProcessLoading(false)}else{if(a===\"abort\"){amc.fn.exit()}else{if(a===\"awaitUser\"){toggleBioProcessLoading(false)}}}}}function processVIStatusHuaweiFinger(c){if(!c){return}var a=c.status;var b=c.type;logAction(\"hw-\"+(b||\"type\")+\"-\"+(a||\"status\"),VI_LOG_ACTION_TYPE);if(a===\"start\"){pwdType=b;hide(\"btnContainer\");show(\"viPwdBox\");canGoBack=false}else{if(a===\"abort\"){amc.fn.exit()}}}function processVIRpcRequest(a){var b=function(e){e=e||{};var d=e.status;if(!paySuccess){if(d===PAYMENT_CODE_SUCCESS){onPaySuccess()}else{if(d===PAYMENT_CODE_FAIL){onPayFailure()}}if(e.pageloading===\"1\"){startLoadignWithText()}else{if(e.pageloading===\"0\"){stopLoading()}}}if(e.VIData){try{var c=JSON.parse(e.VIData).finishCode;logAction(\"viCode|\"+c,VI_LOG_ACTION_TYPE)}catch(f){}sendResponseDataToVI(e.VIData)}};hide(\"gifImg\");startLoadignWithText(\"{{paying}}\");submitPay(a,b)}function submitPay(a,c){var b={action:confirmAction};b.action[\"params\"]=mergeObjcts(b.action[\"params\"],{VIData:a});document.asyncSubmit(b,function(d){d=d||{};c&&c(d);if(d.confirmAct&&d.confirmAct.name){confirmAction=buildConfirmActionWithAct(d.confirmAct)}if(d.VIData){sendResponseDataToVI(d.VIData)}})}function processVIToPWD(a){VIDataForPwdPage=a;stopLoading();gotoPwdPage()}function onDestroy(){viPageCloseNotify()}function viPageCloseNotify(){var a={action:VI_ACTION_CLOSE_PAGE};sendDataToVIPlugin(a)}function gotoPwdPage(){var a={};a={action:{name:\"loc:bnvb\"},param:{tplid:\"QUICKPAY@cashier-pwd-check-flex\",tpl:rpc.viPwdTpl,data:{payOrder:canGoBack,pwdTip:rpc.pwdTip,logon_id:rpc.logon_id,VIData:VIDataForPwdPage,confirmAct:confirmAction}}};document.submit(a)}function toggleBioProcessLoading(a){if(pwdType!=\"fp\"&&pwdType!=\"wl\"&&pwdType!=\"faceid\"&&pwdType!=\"FACEID\"&&pwdType!=\"ZFACE\"){return}if(a){startLoadignWithText(\"{{verifying}}\")}else{stopLoading()}}function processVIRpcRequestHuaweiFinger(a){submitPay(a,function(c){c=c||{};var b=c.status;if(b===PAYMENT_CODE_SUCCESS){showVILoadingWithPaymentResult(true)}})}function showVILoadingWithPaymentResult(b){var a={action:VI_ACTION_PAY_STATUS,data:{status:b?\"success\":\"fail\"}};sendDataToVIPlugin(a)};"}],"tag":"script"},{"children":[{"tag":"text","text":".pay-text {\n        color: #fff;\n    }\n\n    .protocol-box-horiz {\n        display: flex;\n        align-items: flex-start;\n    }\n\n    .protocol-box-vert {\n        display: flex;\n        flex-direction: column;\n        overflow: scroll;\n        max-height: 100px;\n    }\n\n    .amc-i-nav-m-box {\n        flex: 4.0;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .vi-finger-box {\n        justify-content: center;\n    }\n\n    .vi-finger {\n        height: 72px;\n        max-height: 72px;\n        min-height: 72px;\n    }\n\n    .bottom-box {\n        justify-content: flex-end;\n    }\n\n    .due-msg-box {\n         margin-top: 16px;\n    }"}],"tag":"style"}],"tag":"head"},{"css":"amc-i-body","children":[{"css":"amc-1px-title-line","tag":"div","id":"titleLine"},{"css":"amc-v-box amc-flex-1","children":[{"css":"amc-pd-lr amc-v-box amc-align-center amc-scroll-flex","children":[{"css":"amc-flex-space-1","tag":"div"},{"css":"amc-pd-t","children":[{"tag":"img","id":"pcreditPayLogo"}],"tag":"div"},{"css":"amc-abs-space-v-l","tag":"div"},{"css":"amc-self-stretch","children":[{"css":"amc-text-center amc-ellipsis-3-line amc-flex-1 amc-font-l","tag":"label","id":"creditAmount"}],"tag":"div"},{"css":"amc-self-stretch","children":[{"css":"amc-text-center amc-flex-1 amc-ellipsis-3-line amc-margin-t-xs amc-font-l amc-text-light-color","tag":"label","id":"dueDay"}],"tag":"div","id":"dueMsgBox"},{"css":"amc-flex-space-2","tag":"div"}],"tag":"div"},{"css":"amc-pd-lr amc-v-box bottom-box amc-pd-t-s","children":[{"css":"protocol-box-horiz","children":[{"css":"amc-font-m amc-margin-r-xs amc-ellipsis","tag":"label","id":"protocolInfo"},{"css":"amc-font-m amc-theme-color amc-flex-1","onclick":"openProtocol()","tag":"label","id":"protocolName"}],"tag":"div","id":"protocolBox"},{"css":"amc-pd-tb","children":[{"css":"amc-btn-primary amc-justify-center amc-align-center","children":[{"css":"amc-btn-img amc-hidden","tag":"embed","id":"gifImg","type":"MQPPayGifView"},{"css":"pay-text amc-font-super-l amc-btn-ellpsis","tag":"label","id":"btnText"}],"onclick":"onPay()","tag":"div","id":"payBtn"}],"tag":"div","id":"btnContainer"},{},{"css":"vi-finger vi-finger-box amc-hidden","children":[{"css":"vi-finger amc-flex-1","tag":"embed","id":"viPlugin","type":"VIPayPluginView"}],"tag":"div","id":"viPwdBox"},{"css":"amc-iphone-x-pd-b","tag":"div"}],"tag":"div"}],"tag":"div"}],"tag":"body","id":"body","onkeydown":"onKeyDown()","onload":"init()"}],"tag":"html"},"publishVersion":"150924","name":"cashier-credit-sign-flex","format":"JSON","tag":"QUICKPAY","time":"0031","tplId":"QUICKPAY@cashier-credit-sign-flex","tplVersion":"5.3.9"}