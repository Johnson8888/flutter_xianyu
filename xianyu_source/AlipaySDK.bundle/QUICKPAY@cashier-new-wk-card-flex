{"data":{"children":[{"children":[{"src":"AlipaySDK.bundle/amc.i18n","tag":"meta","type":"i18n"},{"rel":"stylesheet","tag":"link","href":"AlipaySDK.bundle/amc.css"},{"src":"AlipaySDK.bundle/amc.js","tag":"script"},{"children":[{"tag":"text","text":"var rpc=amc.rpcData;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var path=amc.path+\"alipay_msp_\";var infoPng=path+\"info\";var needInput=rpc.needinput;var inputsMap={cardname:\"cardName\",fullname:\"fullName\",validate:\"validate\",cvv2:\"cvv2\",email:\"email\",receiveaddress:\"receiveAddress\"};var inputsReverseMap={};var showing={};var onInputVerify={validate:{regex:\"^(0[1-9]|1[012])/?\\\\d{2}$\",lastValue:\"\"},cvv2:{regex:\"^\\\\d{0,3}$\",lastValue:\"\"}};var onSubmitVerify={fullName:{regex:\"^\\\\S+\\\\s+\\\\S+.*$\",text:\"{{full_name_format_error}}\"},cvv2:{regex:\"^\\\\d{3}$\",text:\"{{cvv2_format_error}}\"},email:{regex:\"^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$\",text:\"{{email_format_error}}\"}};function updateInputState(a,b){a=amc.fn.isString(a)?getTag(a):a;if(a.value.length){amc.fn.hide(b)}else{amc.fn.show(b)}}function checkInput(a,b){updateInputState(a,b);updateSubmitState()}function updateSubmitState(){var a=document.getElementsByTagName(\"input\");var c=false;for(var b=0;b<a.length;b++){if(a[b].id&&!showing[a[b].id]){continue}if(a[b].value===\"\"){c=true;break}}if(showing.receiveAddress&&getTag(\"receiveAddress\").innerText==\"\"){c=true}getTag(\"submit\").disabled=c}function onInput(c,a){var b=getTag(c).value;if(onInputVerify[c]){if(b.match(onInputVerify[c][\"regex\"])){onInputVerify[c][\"lastValue\"]=b}else{getTag(c).value=onInputVerify[c][\"lastValue\"]}}if(a){updateInputState(c,a)}updateSubmitState()}function onclickCvv(){getTag(\"dlg_img\").src=path+\"cvv\";getTag(\"dlg_text\").innerText=\"{{cvv_info}}\";getTag(\"dlg_title\").innerText=\"{{cvv}}\";getTag(\"dlg\").showModal()}function onClickValidate(){getTag(\"dlg_img\").src=path+\"validate\";getTag(\"dlg_text\").innerText=\"{{validity_info}}\";getTag(\"dlg_title\").innerText=\"{{validity}}\";getTag(\"dlg\").showModal()}function onClickBill(){var f={action:{name:\"/card/wkSetBillAddress\"}};f.action[\"params\"]={};f.action[\"params\"][\"call_init\"]=true;var d={};var b=document.querySelectorAll(\"input\");for(var c=0;c<b.length;c++){var e=b[c].value?b[c].value.trim():\"\";var g=b[c].id;var a=inputsReverseMap[g];if(showing[g]){if(g===\"fullName\"){d[a]=unformatFullName(e)}else{if(g===\"validate\"){d[a]=unformatExpireDate(e)}else{d[a]=e}}}}f.param=d;document.submit(f)}function onSubmit(){for(var h in onSubmitVerify){if(!showing[h]){continue}var a=getTag(h);var f=a.value?a.value.trim():\"\";if(!f.match(onSubmitVerify[h].regex)){document.toast({text:onSubmitVerify[h].text,type:\"fail\"},function(){a.focus()});return}}var g={action:{name:rpc.nextAction||\"/card/sign\",loadtxt:\"\"}};g.action[\"neec\"]=\"6004\";g.action[\"host\"]=rpc.pci_url;g.action[\"https\"]=true;g.action[\"enctype\"]=\"application/x-www-form-urlencoded\";g.action[\"request_param\"]=\"requestData\";g.action[\"params\"]={};g.action[\"params\"][\"cardtype\"]=\"WAI_KA\";g.action[\"params\"][\"ccdctoken\"]=rpc.ccdctoken;var e={};var c=document.querySelectorAll(\"input\");for(var d=0;d<c.length;d++){var f=c[d].value?c[d].value.trim():\"\";var h=c[d].id;var b=inputsReverseMap[h];if(showing[h]){if(h===\"fullName\"){e[b]=unformatFullName(f)}else{if(h===\"validate\"){e[b]=unformatExpireDate(f)}else{e[b]=f}}}}g.param=e;document.asyncSubmit(g,function(i){amc.fn.shouldShowBtnIndicator(i,\"submit\",\"loading\")});amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submit\",\"loading\")}function onBack(){amc.fn.exitConfirm(rpc.exitInfo||\"{{confirm_cancel_pay}}\")}function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var e=amc.fn.getNav(amc.res.navBack,\"{{return}}\",\"{{write_card_info}}\",null,null,onBack,null);getTag(\"body\").insertBefore(e,getTag(\"mainBody\"));if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}var a=getTag(\"cvv2InfoImg\");var c=getTag(\"validateInfoPng\");var g=getTag(\"cvv2\");var d=getTag(\"validate\");a.src=infoPng;c.src=infoPng;getTag(\"billAddrRightArrow\").src=amc.res.arrowRight;if(needInput){for(var b in inputsMap){var f=inputsMap[b];if(needInput[b]&&needInput[b].display){if(b===\"cardname\"||b===\"receiveaddress\"){getTag(f).innerText=needInput[b].value||\"\"}else{if(b===\"validate\"){getTag(f).value=formatExpireDate(needInput[b].value)||\"\"}else{getTag(f).value=needInput[b].value||\"\"}}if(needInput[b].disable){if(!needInput[b].value){continue}getTag(f).disabled=true;getTag(f).style.color=\"#a5a5a5\"}show(f+\"Area\");showing[f]=true}inputsReverseMap[f]=b}}if(!(showing.fullName||showing.cvv2||showing.validate)){hide(\"nameCvv2ValidateSpace\")}checkInput(g,a);checkInput(d,c);if(rpc.asi==\"ACTIVE\"){show(\"asiBox\");getTag(\"asiImg\").src=amc.path+\"alipay_msp_asi_icon\"}}function onKeyDown(){if(event.which==4){onBack()}}function unformatFullName(a){if(a){return a.replace(/\\s\\s+/g,\" \").trim()}else{return a||\"\"}}function unformatExpireDate(a){if(a){return a.replace(\"/\",\"\")}else{return a||\"\"}}function formatExpireDate(a){if(a&&a.length===4&&(a.indexOf(\"/\")<0)){return a.substr(0,2)+\"/\"+a.substr(2)}else{return a||\"\"}}function showProtocol(){amc.fn.openweb(\"https://render.alipay.com/p/c/k5fyyzyn\")};"}],"tag":"script"},{"children":[{"tag":"text","text":".name {\n            font-size: 16px;\n            margin-right: 5px;\n            color: #000;\n        }\n        .amc-cell-l-box{\n            width:80px;\n            padding-right: 5px;\n        }\n        .detail-cell {\n            align-items: center;\n            background-color: #fff;\n            padding: 5px 15px;\n        }\n        .align-start {\n            align-items: flex-start;\n        }\n\n        .l-label-ellipsis {\n            -webkit-line-clamp:3;\n            -webkit-box-orient:vertical;\n            display:-webkit-box;\n        }\n        .amc-cell-l-box{\n            width:80px;\n            padding-right: 5px;\n        }\n        .asi-img {\n            width: 12px;\n            height: 12px;\n            margin-right: 5px;\n        }\n        .asi-txt {\n            color: #576C97;\n            font-size: 12px;\n        }\n        .protocal-box {\n            margin: 16px;\n        }\n        .protocal-title {\n            margin-right: 4px;\n        }"}],"tag":"style"}],"tag":"head"},{"css":"amc-body","children":[{"css":"amc-main amc-scroll-android","children":[{},{"css":"amc-v-box amc-hidden","children":[{"css":"amc-pd-lr amc-pd-b-s","children":[{"css":"amc-font-m amc-text-slight-color ","tag":"label","id":"cardName"}],"tag":"div"}],"tag":"div","id":"cardNameArea"},{},{"css":"amc-v-box","children":[{"css":"amc-1px-line","tag":"div"},{},{"css":"amc-v-box amc-hidden","children":[{"css":"detail-cell  amc-pd-lr","children":[{"css":"amc-cell-l-box","children":[{"css":"name  amc-flex-1 l-label-ellipsis","children":[{"tag":"text","text":"{{name}}"}],"tag":"label"}],"tag":"div"},{"css":"amc-cell-m-box amc-input-box-height","children":[{"css":"amc-input","tag":"input","id":"fullName","placeholder":"{{input_name_on_card}}","value":"","oninput":"onInput('fullName')"}],"tag":"div"}],"tag":"div"}],"tag":"div","id":"fullNameArea"},{},{"css":"amc-v-box amc-hidden","children":[{"css":"amc-1px-line amc-margin-l","tag":"div"},{"css":"detail-cell  amc-pd-lr","children":[{"css":"amc-cell-l-box","children":[{"css":"amc-cell-l-text  amc-flex-1 l-label-ellipsis","children":[{"tag":"text","text":"{{validity_text}}"}],"tag":"label"}],"tag":"div"},{"css":"amc-cell-m-box amc-input-box-height","children":[{"css":"amc-input","tag":"input","id":"validate","placeholder":"{{month_year}}","type":"month","value":"","oninput":"onInput('validate','validateInfoPng')"}],"tag":"div"},{"children":[{"onclick":"onClickValidate()","tag":"img","id":"validateInfoPng"}],"tag":"div"}],"tag":"div"}],"tag":"div","id":"validateArea"},{},{"css":"amc-v-box amc-hidden","children":[{"css":"amc-1px-line amc-margin-l","tag":"div"},{"css":"detail-cell  amc-pd-lr","children":[{"css":"amc-cell-l-box","children":[{"css":"amc-cell-l-text amc-flex-1 l-label-ellipsis","children":[{"tag":"text","text":"{{cvv_text}}"}],"tag":"label"}],"tag":"div"},{"css":"amc-cell-m-box amc-input-box-height","children":[{"css":"amc-input","maxlength":"3","tag":"input","id":"cvv2","placeholder":"{{last_three_num}}","type":"number","value":"","oninput":"onInput('cvv2','cvv2InfoImg')"}],"tag":"div"},{"children":[{"onclick":"onclickCvv()","tag":"img","id":"cvv2InfoImg"}],"tag":"div"}],"tag":"div"}],"tag":"div","id":"cvv2Area"},{"css":"amc-1px-line","tag":"div"},{},{"css":"amc-abs-space-v-l","tag":"div"}],"tag":"div","id":"nameCvv2ValidateSpace"},{},{"css":"amc-v-box amc-hidden","children":[{"css":"amc-1px-line","tag":"div"},{"css":"detail-cell  amc-pd-lr","children":[{"css":"amc-cell-l-box","children":[{"css":"amc-cell-l-text amc-flex-1 l-label-ellipsis","children":[{"tag":"text","text":"{{email}}"}],"tag":"label"}],"tag":"div"},{"css":"amc-cell-m-box amc-input-box-height","children":[{"css":"amc-input","tag":"input","id":"email","placeholder":"{{email_address}}","value":"","oninput":"onInput('email')"}],"tag":"div"}],"tag":"div"},{"css":"amc-1px-line","tag":"div"},{},{"css":"amc-abs-space-v-l","tag":"div"}],"tag":"div","id":"emailArea"},{},{"css":"amc-v-box amc-hidden","children":[{"css":"amc-1px-line","tag":"div"},{"css":"amc-large-cell amc-pd-lr amc-pd-t-s amc-pd-b-s amc-height-auto","children":[{"css":"amc-cell-l-box amc-align-self-start","children":[{"css":"amc-cell-l-text amc-flex-1 l-label-ellipsis","children":[{"tag":"text","text":"{{bill_address}}"}],"tag":"label"}],"tag":"div"},{"css":"amc-cell-m-box amc-pd-r","children":[{"css":"amc-cell-l-text amc-flex-1","tag":"label","id":"receiveAddress"}],"tag":"div"},{"tag":"img","id":"billAddrRightArrow"}],"onclick":"onClickBill()","tag":"div"},{"css":"amc-1px-line","tag":"div"}],"tag":"div","id":"receiveAddressArea"},{"css":"protocal-box","children":[{"css":"amc-protocol-text protocal-title","children":[{"tag":"text","text":"{{look}}"}],"tag":"label"},{"css":"amc-protocol-text amc-theme-color","children":[{"tag":"text","text":"{{serve_protocol_full}}"}],"tag":"label"}],"onclick":"showProtocol();","tag":"div"},{},{"css":"amc-margin-lr amc-margin-b amc-align-center amc-justify-center amc-btn-primary","children":[{"css":"amc-loading-img amc-text-white-clolor amc-hidden","src":"indicatior","tag":"img","id":"loading"},{"css":"amc-btn-primary","children":[{"tag":"text","text":"{{next}}"}],"onclick":"onSubmit()","disabled":"true","tag":"button","id":"submit"}],"tag":"div"},{},{"css":"amc-flex-center amc-hidden","children":[{"css":"asi-img","tag":"img","id":"asiImg"},{"css":"asi-txt","children":[{"tag":"text","text":"{{asi_open}}"}],"tag":"label"}],"tag":"div","id":"asiBox"}],"tag":"div","id":"mainBody"},{"css":"amc-dlg-box amc-v-box","children":[{"css":"amc-dlg-title","tag":"label","id":"dlg_title"},{"css":"amc-justify-center","children":[{"tag":"img","id":"dlg_img"}],"tag":"div"},{"css":"amc-dlg-txt","tag":"label","id":"dlg_text"},{"css":"amc-adapt-line amc-dlg-width","tag":"div"},{"css":"amc-theme-color amc-dlg-btn","children":[{"tag":"text","text":"{{i_know_it}}"}],"onclick":"getTag('dlg').close()","tag":"button","id":"btn_main"}],"tag":"dialog","id":"dlg"}],"tag":"body","id":"body","onkeydown":"onKeyDown();","onload":"init()"}],"tag":"html"},"publishVersion":"150924","name":"cashier-new-wk-card-flex","format":"JSON","tag":"QUICKPAY","time":"0005","tplId":"QUICKPAY@cashier-new-wk-card-flex","tplVersion":"5.2.8"}