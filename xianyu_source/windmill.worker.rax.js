/**
  * windmill.rax.min.js v0.4.5.
  */
console.log("Start windmill rax.min (0.4.5) framework. Build at 2018-12-05 14:28"),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e["windmill-rax"]=n()}(this,function(){"use strict";var n=function(){},t={},a=["debug","info","log","warn","error"];function o(e){if("object"==typeof process&&process&&process.env,!0===t.debugMode||"true"===t.debugMode)return!0;var n=t.logLevel||"error";return a.indexOf(e)>=a.indexOf(n)}function u(e){o("debug")&&n("debug",e)}function c(e){o("error")&&n("error",e)}function l(e){var a={global:{}};return{initGlobalData:function(e){a.global=e},setGlobalData:function(e,n){a.global[e]=n},getGlobalData:function(e){return a.global[e]},initData:function(e,n){a["page"+e]=n},setData:function(e,n,t){a["page"+e][n]=t},getData:function(e,n){return a["page"+e][n]}}}function g(t){return{postMessage:function(e,n){t.$emit("message",e,n)},addEventListener:function(e,n){t.$on("message",n)}}}n=function(e,n){var t,a="["+((t=e).charAt(0).toUpperCase()+t.slice(1))+"][wml-w] "+n;console.log(a)};var s={},p=null;function d(e){return s[e]}function i(e){u("Create a page instance ("+JSON.stringify(e)+").");var n,t,a=e.data,o=a.pageName,r=a.clientId;t=r,s[n=o]?s[n].clientId=t:s[n]={clientId:t};var i=d(o);if(p&&i){i.config;var f=s[o].lifecycles;if(f&&f.length)for(var c=function(e){var t=f[e].hookName,a=f[e].callback;"function"==typeof a&&(u('Listening the "'+t+'" lifecycle of page ('+r+")."),p.$cycle("page@"+r+":"+t,function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];u('Emit the "'+t+'" lifecycle of page ('+r+")."),a.apply(void 0,e)}))},l=0;l<f.length;l++)c(l)}}var f=null;function v(){return f}function b(r,e,n){u("Define a new page "+r+".");var t,a,o,i=l(),f=g(n);return a=e,o=n,s[t=r]?c("The page "+t+" has already been registered!"):(u('Register page: "'+t+'".'),s[t]={name:t,config:a},p=o),e.data&&i.initData(r,e.data||{}),{on:function(e,n){var t,a,o;a=e,o=n,s[t=r].lifecycles||(s[t].lifecycles=[]),s[t].lifecycles.push({hookName:a,callback:o})},postMessage:function(e){var n=d(r);if(n){var t=n.clientId;f.postMessage(e,t)}},setData:function(e,n){i.setData(r,e,n)},getData:function(e){i.getData(r,e)}}}function e(){u("Setup Rax framework in worker.");var r="undefined"!=typeof global?global:"undefined"!=typeof self?self:new Function("return this")(),e=r.__REGISTER_DSL_FRAMEWORK_IN_WORKER__;if("function"==typeof e)var t=e({name:"Rax",getContext:function(){var a=function(e){return function(e,n){if(f)return c("The app instance has already been created!"),f;u("Create App instance.");var t=l(),a=g(n);n.$on("error",function(){e.onError&&e.onError()}),n.$on("pageNotFound",function(){e.onPageNotFound&&e.onPageNotFound()}),n.$on("beforePageCreate",function(e){u("Before Page Create "+JSON.stringify(e)),i(e)}),e.globalData&&t.initGlobalData(e.globalData);var o={on:function(t,a){"function"==typeof a&&(u('Listening the "'+t+'" lifecycle of app.'),n.$cycle("app:"+t,function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];u('Emit the "'+t+'" lifecycle of app.'),a.apply(void 0,e)}))},addEventListener:function(e,n){a.addEventListener(e,n)},setGlobalData:t.setGlobalData,getGlobalData:t.getGlobalData};return f=o}(e,t)},o=function(e,n){return b(e,n,t)};return{require:function(e){var n={app:a,page:o},t=e.split("@core/")[1];return"app"===t||"page"===t?n[t]:r.__WINDMILL_MODULE_GETTER__(t)},getApp:v}}})}return e(),e});