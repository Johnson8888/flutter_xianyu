/**
  * windmill.vue.min.js v0.4.5.
  */
console.log("Start windmill vue.min (0.4.5) framework. Build at 2018-12-05 14:28"),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["windmill-vue"]=t()}(this,function(){"use strict";function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e){return Object.prototype.toString.call(e).slice(8,-1)}function s(e){return"Object"===f(e)}function i(i,o){var r;return void 0===o&&(o=0),"function"!=typeof setTimeout||"function"!=typeof clearTimeout?(console.warn("[Warn] There is no timer API in the current context."),i):function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this;clearTimeout(r),r=setTimeout(function(){return i.apply(n,e)},o)}}var n=function(){},o={},r=["debug","info","log","warn","error"];function a(){return"object"==typeof process&&process&&process.env&&!1}function t(e){if(a())return"function"==typeof __test_logger__&&(n=__test_logger__,!0);if(!0===o.debugMode||"true"===o.debugMode)return!0;var t=o.logLevel||"error";return r.indexOf(e)>=r.indexOf(t)}function u(e){t("debug")&&n("debug",e)}function h(e){t("warn")&&n("warn",e)}function l(e){t("error")&&n("error",e)}function d(e){return"function"==typeof e?Function.prototype.toString.call(e):""}n=function(e,t){var n,i="["+((n=e).charAt(0).toUpperCase()+n.slice(1))+"][wml-w] "+t;console.log(i)};var p="[[RendererPageReady]]",v="[[ReceivedInitialState]]",g="[[RendererPageStateChange]]",y={launch:"onLaunch",show:"onShow",hide:"onHide",unload:"onUnload"},_={load:"onLoad",ready:"onReady",show:"onShow",hide:"onHide",unload:"onUnload"},Pe="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e,m,b=(function(e,t){function c(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0});var i=/[^\w.$]/;function r(e){if(!i.test(e)){var n=e.split(".");return function(e){for(var t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}}Object.freeze({});function s(e){return null!==e&&"object"==typeof e}var a=Object.prototype.toString;function f(e){return"[object Object]"===a.call(e)}function o(e){var t=parseFloat(String(e));return 0<=t&&Math.floor(t)===t&&isFinite(e)}function n(e,t){for(var n=Object.create(null),i=e.split(","),o=0;o<i.length;o++)n[i[o]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}n("slot,component",!0),n("key,ref,slot,slot-scope,is");function u(e,t){if(e.length){var n=e.indexOf(t);if(-1<n)return e.splice(n,1)}}var h=Object.prototype.hasOwnProperty;function l(e,t){return h.call(e,t)}Function.prototype.bind;function d(e,t){for(var n in t)e[n]=t[n];return e}function p(e,t,n){}var v,g=function(e,t,n){return!1},y="__proto__"in{},_="undefined"!=typeof window,m="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,b=m&&WXEnvironment.platform.toLowerCase(),w=_&&window.navigator.userAgent.toLowerCase(),O=(w&&/msie|trident/.test(w),w&&w.indexOf("msie 9.0"),w&&0<w.indexOf("edge/")),D=(w&&w.indexOf("android"),w&&/iphone|ipad|ipod|ios/.test(w)||"ios"===b),P=(w&&/chrome\/\d+/.test(w),{}.watch);if(_)try{var j={};Object.defineProperty(j,"passive",{get:function(){}}),window.addEventListener("test-passive",null,j)}catch(e){}var I=function(){return void 0===v&&(v=!_&&!m&&void 0!==Pe&&Pe.process&&Pe.process.env&&"server"===Pe.process.env.VUE_ENV),v},x=_&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function A(e){return"function"==typeof e&&/native code/.test(e.toString())}var S;"undefined"!=typeof Symbol&&A(Symbol)&&"undefined"!=typeof Reflect&&A(Reflect.ownKeys);S="undefined"!=typeof Set&&A(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var T=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],C={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:g,isReservedAttr:g,isUnknownElement:g,getTagNamespace:p,parsePlatformTagName:function(e){return e},mustUseProp:g,_lifecycleHooks:T},$=C.optionMergeStrategies;function k(e,t){if(!t)return e;for(var n,i,o,r=Object.keys(t),a=0;a<r.length;a++)i=e[n=r[a]],o=t[n],l(e,n)?f(i)&&f(o)&&k(i,o):ue(e,n,o);return e}function E(n,i,o){return o?function(){var e="function"==typeof i?i.call(o,o):i,t="function"==typeof n?n.call(o,o):n;return e?k(e,t):t}:i?n?function(){return k("function"==typeof i?i.call(this,this):i,"function"==typeof n?n.call(this,this):n)}:i:n}function L(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function R(e,t,n,i){var o=Object.create(e||null);return t?d(o,t):o}function M(e,t,n){if(t)for(var i=t;i=i.$parent;){var o=i.$options.errorCaptured;if(o)for(var r=0;r<o.length;r++)try{if(!1===o[r].call(i,e,t,n))return}catch(e){F(e,i,"errorCaptured hook")}}F(e,t,n)}function F(e,t,n){if(C.errorHandler)try{return C.errorHandler.call(null,e,t,n)}catch(e){N(e,null,"config.errorHandler")}N(e,t,n)}function N(e,t,n){if(!_&&!m||"undefined"==typeof console)throw e;console.error(e)}$.data=function(e,t,n){return n?E(e,t,n):t&&"function"!=typeof t?e:E(e,t)},T.forEach(function(e){$[e]=L}),["component","directive","filter"].forEach(function(e){$[e+"s"]=R}),$.watch=function(e,t,n,i){if(e===P&&(e=void 0),t===P&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var o={};for(var r in d(o,e),t){var a=o[r],s=t[r];a&&!Array.isArray(a)&&(a=[a]),o[r]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},$.props=$.methods=$.inject=$.computed=function(e,t,n,i){if(!e)return t;var o=Object.create(null);return d(o,e),t&&d(o,t),o},$.provide=E;var V,U,H=[],W=!1;function G(){W=!1;for(var e=H.slice(0),t=H.length=0;t<e.length;t++)e[t]()}var J=!1;if("undefined"!=typeof setImmediate&&A(setImmediate))U=function(){setImmediate(G)};else if("undefined"==typeof MessageChannel||!A(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())U=function(){setTimeout(G,0)};else{var B=new MessageChannel,K=B.port2;B.port1.onmessage=G,U=function(){K.postMessage(1)}}if("undefined"!=typeof Promise&&A(Promise)){var X=Promise.resolve();V=function(){X.then(G),D&&setTimeout(p)}}else V=U;function z(e,t){var n;if(H.push(function(){if(e)try{e.call(t)}catch(e){M(e,t,"nextTick")}else n&&n(t)}),W||(W=!0,J?U():V()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){n=e})}var q=0,Q=function(){this.id=q++,this.subs=[]};Q.prototype.addSub=function(e){this.subs.push(e)},Q.prototype.removeSub=function(e){u(this.subs,e)},Q.prototype.depend=function(){Q.target&&Q.target.addDep(this)},Q.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},Q.target=null;var Y=[];function Z(e){Q.target&&Y.push(Q.target),Q.target=e}function ee(){Q.target=Y.pop()}var te=function(e,t,n,i,o,r,a,s){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=o,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ne={child:{configurable:!0}};ne.child.get=function(){return this.componentInstance},Object.defineProperties(te.prototype,ne);var ie=Array.prototype,oe=Object.create(ie);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(a){var s=ie[a];c(oe,a,function(){for(var e=arguments,t=[],n=arguments.length;n--;)t[n]=e[n];var i,o=s.apply(this,t),r=this.__ob__;switch(a){case"push":case"unshift":i=t;break;case"splice":i=t.slice(2)}return i&&r.observeArray(i),r.dep.notify(),o})});var re=Object.getOwnPropertyNames(oe),ae=!0,se=function(e){this.value=e,this.dep=new Q,this.vmCount=0,c(e,"__ob__",this),Array.isArray(e)?((y?function(e,t,n){e.__proto__=t}:function(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];c(e,r,t[r])}})(e,oe,re),this.observeArray(e)):this.walk(e)};function ce(e,t){var n;if(s(e)&&!(e instanceof te))return l(e,"__ob__")&&e.__ob__ instanceof se?n=e.__ob__:ae&&!I()&&(Array.isArray(e)||f(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new se(e)),t&&n&&n.vmCount++,n}function fe(n,e,i,t,o){var r=new Q,a=Object.getOwnPropertyDescriptor(n,e);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(i=n[e]);var f=!o&&ce(i);Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(n):i;return Q.target&&(r.depend(),f&&(f.dep.depend(),Array.isArray(e)&&function e(t){for(var n=void 0,i=0,o=t.length;i<o;i++)(n=t[i])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&e(n)}(e))),e},set:function(e){var t=s?s.call(n):i;e===t||e!=e&&t!=t||(c?c.call(n,e):i=e,f=!o&&ce(e),r.notify())}})}}function ue(e,t,n){if(Array.isArray(e)&&o(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n;var i=e.__ob__;return e._isVue||i&&i.vmCount?n:i?(fe(i.value,t,n),i.dep.notify(),n):e[t]=n}se.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)fe(e,t[n])},se.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)ce(e[t])};var he=new S;function le(e){(function e(t,n){var i,o,r=Array.isArray(t);if(!(!r&&!s(t)||Object.isFrozen(t)||t instanceof te)){if(t.__ob__){var a=t.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(r)for(i=t.length;i--;)e(t[i],n);else for(i=(o=Object.keys(t)).length;i--;)e(t[o[i]],n)}})(e,he),he.clear()}function de(e,t){if(t){if(e._directInactive=!1,function(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)de(e.$children[n]);pe(e,"activated")}}function pe(e,t){Z();var n=e.$options[t];if(n)for(var i=0,o=n.length;i<o;i++)try{n[i].call(e)}catch(n){M(n,e,t+" hook")}e._hasHookEvent&&e.$emit("hook:"+t),ee()}var ve=[],ge=[],ye={},_e=!1,me=!1,be=0;function we(){var e,t;for(me=!0,ve.sort(function(e,t){return e.id-t.id}),be=0;be<ve.length;be++)(e=ve[be]).before&&e.before(),t=e.id,ye[t]=null,e.run();var n=ge.slice(),i=ve.slice();be=ve.length=ge.length=0,_e=me=!(ye={}),function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,de(e[t],!0)}(n),function(e){for(var t=e.length;t--;){var n=e[t],i=n.vm;i._watcher===n&&i._isMounted&&pe(i,"updated")}}(i),x&&C.devtools&&x.emit("flush")}var Oe=0,De=function(e,t,n,i,o){this.vm=e,o&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.computed=!!i.computed,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.computed=this.sync=!1,this.cb=n,this.id=++Oe,this.active=!0,this.dirty=this.computed,this.deps=[],this.newDeps=[],this.depIds=new S,this.newDepIds=new S,this.expression="","function"==typeof t?this.getter=t:(this.getter=r(t),this.getter||(this.getter=function(){})),this.computed?(this.value=void 0,this.dep=new Q):this.value=this.get()};De.prototype.get=function(){var e;Z(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;M(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&le(e),ee(),this.cleanupDeps()}return e},De.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},De.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},De.prototype.update=function(){var e=this;this.computed?0===this.dep.subs.length?this.dirty=!0:this.getAndInvoke(function(){e.dep.notify()}):this.sync?this.run():function(e){var t=e.id;if(null==ye[t]){if(ye[t]=!0,me){for(var n=ve.length-1;be<n&&ve[n].id>e.id;)n--;ve.splice(n+1,0,e)}else ve.push(e);_e||(_e=!0,z(we))}}(this)},De.prototype.run=function(){this.active&&this.getAndInvoke(this.cb)},De.prototype.getAndInvoke=function(e){var t=this.get();if(t!==this.value||s(t)||this.deep){var n=this.value;if(this.value=t,this.dirty=!1,this.user)try{e.call(this.vm,t,n)}catch(e){M(e,this.vm,'callback for watcher "'+this.expression+'"')}else e.call(this.vm,t,n)}},De.prototype.evaluate=function(){return this.dirty&&(this.value=this.get(),this.dirty=!1),this.value},De.prototype.depend=function(){this.dep&&Q.target&&this.dep.depend()},De.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||u(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}},t.Watcher=De,t.observe=ce,t.setValue=ue,t.removeValue=function(e,t){if(Array.isArray(e)&&o(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||l(e,t)&&(delete e[t],n&&n.dep.notify())}},t.watchObject=function(e,t,n,i){return f(e)?(l(e,"_watchers")||c(e,"_watchers",[]),ce(e),new De(e,t,n,i,!1)):console.error("The watching target is not a plain object. ("+(o=e,a.call(o).slice(8,-1))+")"),e;var o},t.getValue=function(e,t){var n=r(t);if(n)return n(e);console.error('Failed to get the value of "'+t+'", only accepts simple dot-delimited paths.')},t.nextTick=z}(e={exports:{}},e.exports),e.exports);(m=b)&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")&&m.default;b.Watcher,b.observe;var w=b.setValue,O=(b.removeValue,b.watchObject),D=(b.getValue,b.nextTick),P=void 0,j=[];function I(){return P}var x=O;function A(t,n){function e(e){try{t.call(null,e.data)}catch(e){if(e("Failed to execute the event listener: "+d(t)),n(e))throw e}}return void 0===n&&(n=function(){return!0}),j.push([t,e]),e}function S(e,t){if(s(t))for(var n in t){var i=t[n];s(e[n])&&s(i)?S(e[n],i):e[n]!==i&&w(e,n,i)}return e}function T(e,t,n){if(void 0===n&&(n=function(){return!0}),s(t))for(var i in t)(c(t,i)&&!c(e,i)||n(i))&&(e[i]=t[i]);return e}function C(e,n,i){if(void 0===i&&(i=function(){return!0}),s(e)&&s(n)){var t=function(t){(c(n,t)&&!c(e,t)||i(t))&&Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return n[t]},set:function(e){n[t]=e}})};for(var o in n)t(o)}}var $="[[InternalDescriptor]]";function k(e,t,n){var i={};for(var o in e){var r=!1;for(var a in t)if(o===t[a]){r=!0;break}if(r&&c(e,o)){var s=f(e[o]);"Function"===s?i[o]=e[o]:n(o,s)}}return i}function E(e){var t={};if(s(e))for(var n in e){var i=f(e[n]);"Function"===i?t[n]=e[n]:h('The "'+n+'" in the "methods" property should be a function, not "'+i+'".')}else l('The "methods" property must be a plain object, not "'+f(e)+'".');return t}function L(i,o){return function(e){for(var t in i)if(e===i[t])return!0;for(var n=0;n<o.length;++n)if(e===o[n])return!0;return!1}}function R(n,e){var t={};if(!s(e))return l('The options of Page("'+n+'", {...}) must be a plain object, not "'+f(e)+'".'),t;c(e,"mixins")&&(t.mixins=function(e,n){void 0===n&&(n="");var i=[];return"Array"===f(e)?e.forEach(function(e){if(s(e)){var t={};Object.assign(t,k(e,_,function(e,t){l('The "'+e+'" in the mixins of page '+n+' must be a function, not "'+t+'".')})),c(e,"methods")&&(t.methods=E(e.methods)),i.push(t)}}):h("The mixins option in page "+n+" must be an array, not "+f(e)+", it will be ignored."),i}(e.mixins,n)),c(e,"data")?"Function"!==f(e.data)?(l('The "data()" method must be a function, not "'+f(e.data)+'".'),t.data=function(){return{}}):t.data=e.data:(h('The "data()" method should be passed when creating Page("'+n+'").'),t.data=function(){return{}}),Object.assign(t,k(e,_,function(e,t){l('The "'+e+'" lifecycle of page '+n+' must be a function, not "'+t+'".')})),c(e,"methods")&&(t.methods=E(e.methods));var i=L(_,["mixins","data","methods"]);for(var o in e)c(e,o)&&!i(o)&&l('The "'+o+'" in the definition of Page("'+n+'") is not valid. It will be ignored!');return t}var M=function(e){s(e.methods)&&T(this,e.methods,function(e){h('Do not use the "'+e+'" as a method in current app, it conflicts with the internal API.')}),s(e.globalData)&&C(this,e.globalData,function(e){h('Do not use the "'+e+'" as a property in globalData, it conflicts with the method name or internal API.')})};function F(e,t){return e+"@"+t["[[ClientId]]"]}var N=function(e,t){var n=this;if(Object.defineProperty(this,"[[ClientId]]",{value:t.clientId}),Object.defineProperty(this,"name",{enumerable:!0,value:t.pageName}),s(e.methods)&&T(this,e.methods,function(e){h('Do not use the "'+e+'" as a method in current page, it conflicts with the internal API.')}),"Array"===f(e.mixins))for(var i=e.mixins.length-1;0<=i;--i){var o=e.mixins[i];s(o.methods)&&T(n,o.methods,function(e){h('The "'+e+'" method in the mixin is conflict with the methods of page "'+n.name+'" or other mixins.')})}};N.prototype.$on=function(e,t){I().$on(F(e,this),A(t))},N.prototype.$once=function(e,t){I().$once(F(e,this),A(t))},N.prototype.$emit=function(e,t){var n=I();n.$emit(F(e,this),t,this["[[ClientId]]"]),n.$emit(F(e,this),t)},N.prototype.$off=function(e,t){I().$off(F(e,this),function(e){for(var t=0;t<j.length;++t){var n=j[t];if(n[0]===e)return j.splice(t,1),n[1]}return e}(t))},N.prototype.$getGlobalData=function(){var e=Y();return e?(u('Get the "globalData" of the app instance.'),e.globalData):(l("Can't find available app instance! An empty object is returned for $getGlobalData()."),{})},N.prototype.$setGlobalData=function(e){var t=Y();t?(u("Set global data to the app instance. ("+JSON.stringify(e)+")"),t.mergeData(e)):l("Can't find available app instance! Failed to $setGlobalData().")};var V=I,U=C,H=function e(r,n,i){if(void 0===n&&(n=function(){return!1}),void 0===i&&(i=""),!s(r))return r;var a={},t=function(o){if(c(r,o)){var t=i?i+"."+o:o;"Object"===f(r[o])?a[o]=e(r[o],n,t):Object.defineProperty(a,o,{enumerable:!0,configurable:!0,get:function(){return t=r,n=o,e=Object.getOwnPropertyDescriptor(t,n),(i=Object.create({valueOf:function(){return t[n]}})).enumerable=e.enumerable,i.configurable=e.configurable,i.get="function"==typeof e.get?e.get:function(){return t[n]},i.set="function"==typeof e.set?e.set:function(e){return t[n]=e},Object.defineProperty(i,$,{configurable:!0,value:!0}),i;var t,n,e,i},set:function(e){n(t,e)&&(r[o]=e)}})}};for(var o in r)t(o);return a},W=function e(t){if(s(t))for(var n in t)if(c(t,n)){var i=t[n];if(s(o=i)&&!0===o[$])delete i[$],delete t[n],Object.defineProperty(t,n,i);else switch(f(i)){case"Array":i.forEach(e);break;case"Object":e(i)}}var o},G=x,J=S,B=function e(t){switch(f(t)){case"Array":t.forEach(e);break;case"Object":for(var n in t)e(t[n])}},K=D,X=function(e,t,n){this.id=t.clientId,this.name=t.pageName,u("Create a page instance. ("+this.id+", "+this.name+")"),this._app=n,this._options=e,this._context=new N(this._options,t),this._lifecycles=_,this._shouldUpdate=!0,this._connected=!1,this._initData(),this._initLifecycle(),this._setupHandshake()};X.prototype._initData=function(){var t=this;this._data=this._options.data(H(this._app.globalData,function(e){h('Do NOT modify the "'+e+'" of global data in the data() function of page "'+t.name+'".')}))||{},this._watch(this._app.globalData,function(){return W(t._data)}),U(this._context,this._data,function(e){h('Do not use the "'+e+'" as a property in page data, it conflicts with the method name or internal API.')}),this._watch(this._data,function(){return B(t._data)})},X.prototype._initLifecycle=function(){var a=this,e=V(),t=function(i){var o=a._lifecycles[i],r=[];c(a._options,"mixins")&&"Array"===f(a._options.mixins)&&a._options.mixins.forEach(function(e){c(e,o)&&r.push(e[o])}),c(a._options,o)&&r.push(a._options[o]),0<r.length&&(u('Listening the "'+i+'" lifecycle of page ('+a.id+", "+a.name+")."),e.$cycle("page@"+a.id+":"+i,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];u('Emit the "'+i+'" lifecycle of page ('+a.id+", "+a.name+").");for(var n=0;n<r.length;++n)try{r[n].apply(a._context,e)}catch(e){throw l('Failed to execute the "'+o+'" lifecycle of page '+a.name+" ("+a.id+"), function code: "+d(r[n])),e}}))};for(var n in a._lifecycles)t(n);e.$cycle("page@"+this.id+":unload",function(){var e=Y();e&&e.removePage(a.id),a.destroy()})},X.prototype._watch=function(e,t){var n=this;G(e,t,i(function(){n._shouldUpdate?n.sendData():K(function(){return n._shouldUpdate=!0})},1e3/60),{deep:!0})},X.prototype._setupHandshake=function(){var t=this;u('Setup handshake of page "'+this.name+'". (id: "'+this.id+'")');var e=V();e.$emit("[[WorkerPageReady]]@"+this.id,{clientId:this.id,pageName:this.name},this.id),e.$once(p+"@"+this.id,function(e){u('Received the "'+p+'" event of page "'+t.name+'". (id: "'+t.id+'")'),t.sendInitialState()}),e.$on(g+"@"+this.id,function(e){u("Receive a state mutation from renderer. ("+JSON.stringify(e)+")"),t._shouldUpdate=!1,t.mergeData(e.data)})},X.prototype.sendInitialState=function(){var e=this;if(this._connected)h('The initial data of page "'+this.name+'" has already been sent to renderer.');else{u("Send initial page state to renderer. ("+this.id+", "+this.name+", "+JSON.stringify(this._data)+")");var t=V();t.$emit("[[SendInitialState]]@"+this.id,{clientId:this.id,pageName:this.name,initialState:this._data},this.id),t.$on(v+"@"+this.id,function(){return e._connected=!0})}},X.prototype.sendData=function(e){u("Send new page data to renderer. ("+this.id+", "+this.name+", "+JSON.stringify(e)+")"),V().$emit("[[WorkerPageStateChange]]@"+this.id,e||this._data,this.id)},X.prototype.mergeData=function(e){s(e)&&J(this._data,e)},X.prototype.destroy=function(){u("Destroy a page instance. ("+this.id+", "+this.name+")");var e=V();for(var t in e.$off(p+"@"+this.id),e.$off(v+"@"+this.id),e.$off(g+"@"+this.id),this._lifecycles)e.$decycle("page@"+this.id+":"+t);delete this.id,delete this.name,delete this._app,delete this._options,delete this._context,delete this._data,delete this._lifecycles,delete this._shouldUpdate,delete this._connected};var z=function(e){u("Create a new app instance."),this._options=function(e){var t={};if(!s(e))return l('The parameter of App() must be a plain object, not "'+f(e)+'".'),t;c(e,"globalData")?s(e.globalData)?t.globalData=e.globalData:(l('The "globalData" property must be a plain object, not "'+f(e.globalData)+'".'),t.globalData={}):(h('The "globalData" property should be passed when creating an App().'),t.globalData={}),Object.assign(t,k(e,y,function(e,t){l('The "'+e+'" lifecycle of app must be a function, not "'+t+'".')})),c(e,"methods")&&(t.methods=E(e.methods));var n=L(y,["globalData","methods"]);for(var i in e)c(e,i)&&!n(i)&&l('The "'+i+'" in the definition of App() is not valid. It will be ignored!');return t}(e),this._context=new M(this._options),this._pageOptions={},this._pages={},this._lifecycles=y,this.activePage=void 0,this.globalData=e.globalData||{},this._initLifecycle(),this._startListening()};z.prototype._initLifecycle=function(){var r=this,e=I(),t=function(n){var i=r._lifecycles[n];if(c(r._options,i)){var o=r._options[i];"function"==typeof o?(u('Listening the "'+n+'" lifecycle of app.'),e.$cycle("app:"+n,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];u('Emit the "'+n+'" lifecycle of app.');try{o.apply(r._context,e)}catch(e){throw l('Failed to execute the "'+i+'" lifecycle of the app, function code: '+d(o)),e}})):h('The lifecycle hook "'+i+'" must be a function, not '+f(o)+".")}};for(var n in r._lifecycles)t(n);e.$cycle("app:unload",function(){r.destroy(),q=void 0})},z.prototype._startListening=function(){var i=this,e=I();e.$on("beforePageCreate",function(e){u("Before Page Create. ("+JSON.stringify(e)+")"),i.createPage(e.data)}),e.$on("afterPageCreate",function(e){u("After Page Create. ("+JSON.stringify(e)+")");var t=e.data||{},n=i.getPage(t.clientId);n instanceof X&&n.sendInitialState()})},z.prototype.getContext=function(){return this._context},z.prototype.mergeData=function(e){s(e)&&S(this.globalData,e)},z.prototype.registerPage=function(e,t){e&&"String"===f(e)?(this._pageOptions[e]&&h('The page "'+e+'" has already been registered! The new definition will override the previous one.'),this._pageOptions[e]=R(e,t)):l('Invalid page name: "'+e+'"!')},z.prototype.createPage=function(e){var t=e.clientId,n=e.pageName,i=this._pageOptions[n];if(i)if(this.getPage(t))l('The page "'+t+'" has already been created! The former page instance will be override.');else{var o=new X(i,e,this);o.sendInitialState(),this._pages[t]=o,this.activePage=o}else l('Failed to find the corresponding options of page "'+n+'"')},z.prototype.getPage=function(e){if(e&&this._pages[e]instanceof X)return this._pages[e]},z.prototype.removePage=function(e){u("Remove the page instance ("+e+") from current app."),this.activePage===this._pages[e]&&(this.activePage=void 0),delete this._pages[e]},z.prototype.destroy=function(){u("Destroy the app instance.");var e=I();for(var t in e.$off("beforePageCreate"),e.$off("afterPageCreate"),this._lifecycles)e.$decycle("app:"+t);delete this._options,delete this._context,delete this._pageOptions,delete this._pages,delete this._lifecycles,delete this.activePage,delete this.globalData};var q=void 0;function Q(e){q instanceof z?l("The app instance has already been created! It should be singleton."):q=new z(e)}function Y(){return q}function Z(){var e=Y();if(e)return e.getContext()}function ee(e,t){u('Register page options of "'+e+'".');var n=Y();n?n.registerPage(e,t):l('Can\'t find available app instance. Please call "App({ ... })" to create an app at first.')}function te(){var t="undefined"!=typeof global?global:"undefined"!=typeof self?self:new Function("return this")(),e=t.__REGISTER_DSL_FRAMEWORK_IN_WORKER__;if("function"==typeof e){var n=e({name:"Vue",getContext:function(){var e={App:Q,Page:ee,getApp:Z,requireModule:t.__WINDMILL_MODULE_GETTER__};return a()&&(e.__get_app__=Y),e}});P=n}else l("Failed to register the Vue framework in worker.")}return a()||te(),te});